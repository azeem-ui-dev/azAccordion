<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test</title>
<style type="text/css">
.accordionPanel  {
    width: 300px;
    border: 1px solid #006699;
    margin: 0;
    padding: 0;
    list-style: none;
}
div.accordionPanel {
    border: 0;
}
.acc_title {
    padding: 10px;
    background-color: #8ABDF0;
    color: #000;
    cursor: pointer;
    border-bottom: 1px solid #006699;
}
.acc_image {
    display: block;
    float: left;
    height: 14px;
    width: 14px;
    background: url(accordion-plus.gif) no-repeat;
    margin: 3px 10px 0 0;
}
.acc_active {
    background-color: #0057BD;
    color: #fff;
}
.acc_active .acc_image {
    background: url(accordion-minus.gif) no-repeat;
}
.acc_hover {
    background-color: #33ccf0;
    color: #000;
}
.acc_title:nth-last-child(2) {
    border-bottom: 0;
}
.acc_desc {
    margin: 0;
}
.acc_desc p {
    margin: 10px;
}
.acc_item {
    margin-bottom: 5px;
    border: 1px solid #006699;  
}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
/* Utility */
if ( typeof Object.create !== 'function' ) {
    Object.create = function( obj ) {
        function F() {};
        F.prototype = obj;
        return new F();
    };
}
(function($) {
    var Accordion = {
        init: function(elem, options) {
            var self = this;
            self.elem = elem;
            self.$elem = $(elem);
            self.options = $.extend({}, $.fn.accordionPanel.options, options);
            self.assignClasses();
            self.setState();
  		/* Assign events */
            self.$elem.on('mouseenter', '.acc_title', function(){$(this).addClass('acc_hover');});
            self.$elem.on('mouseleave', '.acc_title', function(){$(this).removeClass('acc_hover');});
            self.$elem.on('click', '.acc_title', {options: self.options}, self.showDetail);
        },
        assignClasses: function() {
            var self = this;
            self.$elem.addClass('accordionPanel');
            self.$elem.children().each(function(index){                  
                if(index%2==0) {
                    $(this).addClass('acc_title');
                }
                else {
                    $(this).addClass('acc_desc');
                }                
            });
            if(self.$elem.is('div')) {
                self.$elem.find('.acc_title').each(function() {
                    $(this).wrap('<div class="acc_item" />');
                });
                self.$elem.find('.acc_desc').each(function() {
                    $(this).appendTo($(this).prev('.acc_item'));
                });        
            };
            if(self.options.showHideIcon == 'yes') {
                self.$elem.find('.acc_title').each(function(){$(this).append('<div class="acc_image"></div>');});
            }
        },
        setState: function() {
            var self = this;
            var state = self.options.initState;            
            switch(state) {
                case 'openOne':
                    self.$elem.find('.acc_desc').each(function(){$(this).hide();});   
                    self.$elem.find('.acc_desc').eq(self.options.activePanel).show();
                    self.$elem.find('.acc_title').eq(self.options.activePanel).addClass('acc_active');
                    break;
                case 'openAll':
                    self.$elem.find('.acc_desc').each(function(){$(this).show();});
                    self.$elem.find('.acc_title').each(function(){$(this).addClass('acc_active');});                 
                    break;
                case 'closeAll':
                    self.$elem.find('.acc_desc').each(function(){$(this).hide();});
                    break;
            }
        },
        showDetail: function(event) { 
            var title_ele = $(this);
			var currTitle = title_ele.prevAll('.acc_title').length;
			/* toggle clicked section */
			if(title_ele.next().is(':visible')) {
				title_ele.removeClass('acc_active');
			}
			else {
				title_ele.addClass('acc_active');
			}
			var animtn = event.data.options.transition + 'Toggle';
			title_ele.stop(true).next()[animtn](event.data.options.speed);	
            /* close other open sections except the clicked one */
			if(event.data.options.behaviour == 'collapseOthers') {
				title_ele.closest('.accordionPanel').find('.acc_desc').each(function(index){
					if(index != currTitle) {
						if($(this).is(':visible')) {
							var animtn = event.data.options.transition + 'Up';
							$(this).stop(true)[animtn](event.data.options.speed);
							$(this).prev('.acc_title').removeClass('acc_active');
						}
					}
				});
			}                         
        }
    }
    $.fn.accordionPanel = function(options) {
        return this.each(function(){
            var accordion = Object.create(Accordion);
            accordion.init(this, options);
        });
    };
    $.fn.accordionPanel.options = {
        initState: 'closeAll', /* openAll, closeAll, openOne */
        activePanel: 0, /* should not exceed more than the number of containers */
        behaviour: 'retainOthers', /* retainOthers, collapseOthers */
        transition: 'slide', /* slideToggle, fadeToggle */
        showHideIcon: 'no',
        speed: 300
    }
})(jQuery);

$(function(){
    $('#dl').accordionPanel({initState: 'openAll'});
    $('#ul').accordionPanel({initState: 'openOne', activePanel: 2, behaviour: 'collapseOthers'});
    $('#div').accordionPanel({initState: 'closeAll', showHideIcon: 'yes', speed: 800});
});

</script>
</head>

<body>
<!--

<<< NOTES >>>

1. Combination of openAll and collapseOthers does not make sense.

-->

<dl id="dl">
    <dt>This is the first title</dt>
    <dd><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit</p></dd>
    <dt>Second title</dt>
    <dd><p>Consectetur adipisicing elit</p></dd>
    <dt>Title 3 goes here</dt>
    <dd><p>Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p></dd>
    <dt>4th title</dt>
    <dd><p>Content for fourth title goes in here</p></dd>
</dl>
<br />
<br />
<ul id="ul">
    <li>This is the first title</dt>
    <li><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit</p></dd>
    <li>Second title</dt>
    <li><p>Consectetur adipisicing elit</p></dd>
    <li>Title 3 goes here</dt>
    <li><p>Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p></dd>
    <li>4th title</dt>
    <li><p>Content for fourth title goes in here</p></dd>
</ul>
<br />
<br />
<div id="div">
    <div>This is the first title</div>
    <div><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit</p></div>
    <div>Second title</div>
    <div><p>Consectetur adipisicing elit</p></div>
    <div>Title 3 goes here</div>
    <div><p>Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p></div>
    <div>4th title</div>
    <div><p>Content for fourth title goes in here</p></div>
</div>
</body>
</html>
